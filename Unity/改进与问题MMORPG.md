问题：

- [x] 创建角色后返回角色选择列表却显示整张空列表
  *因为服务器没有返回角色的信息，在移动同步1 的1h20min之后有讲解*

  *在创建完成后需要和登陆时做同样的操作，将当前用户的所有角色信息通过message发送给客户端，通过(创建角色后会在缓存类Session 时新加角色，因此在该类内循环)来通讯，客户端收到消息后存储到Model.User单例类中，客户端再通过调用Uesr内的信息来清空所有可选择角色并重新生成以实现刷新的作用*

  

- [x] 小地图的那张地图的资源加载是没有生效的，之后再改
- [ ] 角色注册和选择界面默认显示角色是法师，改成默认不显示
- [ ] 移动同步1.30分附近的通知，IEntityNotify ，不懂
- [x] 后进入的客户端的角色信息会把先进入的客户端角色信息覆盖掉，并且先进入的客户端不显示后进入的客户端 ，猜测是 MapService的49行，AddCharacter方法里面的委托是个空委托，已经注释掉了，所以后进入的没有显示到先进入的面板里面
- [x] 传送后角色的Position没有改变，服务器更改后的的Position没有同步到本地客户端，认为是MapServices的第47行出了问题。这里数据是同步了，但是本地的数据没有更新。



  *5 . 6解决：将之前注释掉的那一行GameObjectManager的OnCharacterEnter取消注释之后，移动同步恢复正常，并且UI界面也不会覆盖，并且单个客户端传送也全部恢复正常，*

  *但是带来了新的问题或者说是以前没有发现的问题，当二者同时传送之后，一个客户端的摄像头会绑定在另一个客户端的角色上，原先的角色应当也没有消失，猜测是摄像机的自动绑定出现了问题。*

  


- [x] 7.UIMainCity改成单例类的善后工作还没有做，因此小地图现在失效了
- [ ] 8.角色进入主城服务端会有一个奇怪的报错但似乎不影响工作
  ![](https://cdn.jsdelivr.net/gh/JulyFire1024/JulyFireMarkdownPictureBed/202205102357977.png)




- [x] 9.背包系统 客户端的初始化有一点问题，UserService的248行会报空异常

但应该还是服务端的问题，因为服务端它发来的字节还是全0的

  *9解决：第一个BagManager直接报空引用，要注意的是我们这个BagManager不往脚本上挂，所以是普通的Singleton单例即可，不是MonoSinggleton单例，*

  *第二个报空引用是道具的坐标没有正常显示，并且也报了空引用，因为代码中调用的MainImage根本就没有绑定任何东西，所以他跑了个寂寞，这也是报空引用的绝大多数原因，自己需要手动拖的东西没有拖到*

  *然后是背包UI道具数量显示不正常，这是因为代码中手误了，在循环中最终的数量不足StackLimit时应当减去count而不是之前导入的常量，被智能识别误导了*

  *最后是灰色格子的显示异常，是初始化 i 时候不要减1，循环条件减1才对，这是数组从0开始和Length的对应问题*


- [x] 10.商店系统，买东西之后商店页面的钱数不会实时更新，需要重新打开商店才会更新
- [x] 11.UICharEquip，判断在身上就不显示了这个逻辑写的太简单了，如果我有五个相同的装备，应当是只不显示一个，但是要显示剩下四个，这里初步的想法是增加一个列表，然后if语句加一个与，如果跳过一个后 表的值改为true，之后的就不跳过了。
- [ ] 12.数据表读入的任务类型有问题，无法识别Main和Branch，均识别为枚举的第一个默认项

任务列表任务选中后左侧的块不会改变颜色

希望在打开任务表时能有一个默认的任务被选中显示


-----
改进：

- [ ] 1、用户名和密码都没有合规性检测
- [ ] 2、创建角色名字时可以检测名字是否已经存在
- [ ] 3、在角色选择页面，应该是实时生成prefab而不是显示已有的。
- [ ] 4、小地图加一个按钮，变成点击一下之后弹出来一个页面显示全地图和角色在地图的位置
- [ ] 5、最好已经装备的装备就不再在背包系统中显示了
- [ ] 6、NPC系统和任务系统现在其实是不太科学的，当一个功能NPC成为提交任务的对象时，点击他永远只会显示未完成任务的对话，而不是实现原先的功能，应该优化一下变成点击之后有两个UI按键，由玩家自己选择怎样的交互
